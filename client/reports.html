<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reports - Petty Cash System</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link rel="stylesheet" href="/css/styles.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gray-50 min-h-screen">
<!-- Navigation -->
<nav class="bg-white shadow-sm border-b border-gray-200">
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
<div class="flex justify-between h-16">
<div class="flex items-center">
<div class="flex-shrink-0 flex items-center">
<i class="fas fa-hospital text-blue-600 text-2xl mr-3"></i>
<h1 class="text-xl font-bold text-gray-900">Petty Cash Report
s</h1>
</div>
</div>
<div class="flex items-center space-x-4">
<a href="/" class="px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-100">
<i class="fas fa-home mr-1"></i> Dashboard
</a>
<a href="/reports.html" class="px-3 py-2 rounded-md text-sm font-medium text-white bg-blue-600">
<i class="fas fa-chart-bar mr-1"></i> Reports
</a>
<div id="system-status-badge" class="px-3 py-1 rounded-full text-sm font-medium">
<!-- Filled by JavaScript -->
</div>
</div>
</div>
</div>
</nav>
<!-- System Lock Warning -->
<div id="lock-warning" class="hidden bg-yellow-50 border-b border-yellow-200">
<div class="max-w-7xl mx-auto px-4 py-3 sm:px-6 lg:px-8"><div class="flex items-center">
                <div class="flex-shrink-0">
                    <i class="fas fa-exclamation-triangle text-yellow-400 text-xl"></i>
                </div>
                <div class="ml-3">
                    <h3 class="text-sm font-medium text-yellow-800">
                        Reports are Read-Only
                    </h3>
                    <p class="mt-1 text-sm text-yellow-700">
                        There is an open transaction that requires classification. Reports show data up to the last locked transaction.
                        <a href="/classify.html" class="font-medium underline text-yellow-700 hover:text-yellow-600 ml-2">
                            Click here to classify
                        </a>
                    </p>
                </div>
            </div>
        </div>
    </div>
    <!-- Main Content -->
    <main class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
        <!-- Report Controls -->
        <div class="mb-8 bg-white shadow rounded-lg p-6">
            <div class="flex flex-col md:flex-row md:items-center md:justify-between">
                <div class="mb-4 md:mb-0">
                    <h2 class="text-lg font-medium text-gray-900">Report Period</h2>
                    <p class="text-sm text-gray-600">Select date range for analysis</p>
                </div>
                <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">FFrom Date</label>
                        <input type="date" id="report-from" class="input-field">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">TTo Date</label>
                        <input type="date" id="report-to" class="input-field">
                    </div>
                    <div class="flex items-end">
                        <button id="btn-generate-report" class="btn-primary whitespace-nowrap">
                            <i class="fas fa-filter mr-2"></i>
                            Apply Filter
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Summary Cards -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="bg-white overflow-hidden shadow rounded-lg">
                <div class="p-5">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <i class="fas fa-money-bill-wave text-3xl text-blue-600"></i>
                        </div>
                        <div class="ml-5 w-0 flex-1">
                            <dl>
                                <dt class="text-sm font-medium text-gray-500 truncate">
                                    Total Expenses
                                </dt>
                                <dd class="text-2xl font-bold text-gray-900" id="total-expenses">
                                    Ksh 0
                                </dd>
                            </dl>
                        </div>
                    </div>
                </div>
            </div>
            <div class="bg-white overflow-hidden shadow rounded-lg">
                <div class="p-5">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <i class="fas fa-list-alt text-3xl text-green-600"></i>
                        </div>
                        <div class="ml-5 w-0 flex-1">
                            <dl>
                                <dt class="text-sm font-medium text-gray-500 truncate">
                                    Transactions
                                </dt>
                                <dd class="text-2xl font-bold text-gray-900" id="total-transactions">
                                    0
                                </dd>
                            </dl>
                        </div>
                    </div>
                </div>
            </div>
            <div class="bg-white overflow-hidden shadow rounded-lg">
                <div class="p-5">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <i class="fas fa-tags text-3xl text-purple-600"></i>
                        </div>
                        <div class="ml-5 w-0 flex-1">
                            <dl>
                                <dt class="text-sm font-medium text-gray-500 truncate">
                                    Categories Used
                                </dt>
                                <dd class="text-2xl font-bold text-gray-900" id="categories-used">
                                    0
                                </dd>
                            </dl>
                        </div>
                    </div>
                </div>
            </div>
            <div class="bg-white overflow-hidden shadow rounded-lg">
                <div class="p-5">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <i class="fas fa-percentage text-3xl text-red-600"></i>
                        </div>
                        <div class="ml-5 w-0 flex-1">
                            <dl>
                                <dt class="text-sm font-medium text-gray-500 truncate">
                                    M-Pesa Fees
                                </dt>
                                <dd class="text-2xl font-bold text-gray-900" id="total-fees">
                                    Ksh 0
                                </dd> </dl>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Charts -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
            <!-- Category Distribution -->
            <div class="bg-white shadow rounded-lg p-6">
                <h3 class="text-lg font-medium text-gray-900 mb-4">
                    Expense by Category
                </h3>
                <div class="h-80">
                    <canvas id="category-chart"></canvas>
                </div>
            </div>
            <!-- Monthly Trend -->
            <div class="bg-white shadow rounded-lg p-6">
                <h3 class="text-lg font-medium text-gray-900 mb-4">
                    Monthly Expense Trend
                </h3>
                <div class="h-80">
                    <canvas id="trend-chart"></canvas>
                </div>
            </div>
        </div>
        <!-- Detailed Report -->
        <div class="bg-white shadow rounded-lg overflow-hidden mb-8">
            <div class="px-4 py-5 sm:px-6 border-b border-gray-200">
                <h3 class="text-lg leading-6 font-medium text-gray-900">
                    Detailed Transaction Report
                </h3>
                <p class="mt-1 max-w-2xl text-sm text-gray-500">
                    All classified transactions in selected period
                </p>
            </div>
            <div class="px-4 py-5 sm:p-6">
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead>
                            <tr>
                                <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"> Date
                                </th>
                                <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Transaction ID
                                </th>
                                <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Amount
                                </th>
                                <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Categories
                                </th>
                                <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Status
                                </th>
                                <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Actions
                                </th>
                            </tr>
                        </thead>
                        <tbody id="report-body" class="divide-y divide-gray-200">
                            <!-- Filled by JavaScript -->
                            <tr>
                                <td colspan="6" class="px-3 py-8 text-center">
                                    <div class="text-gray-500">
                                        <i class="fas fa-chart-bar text-4xl mb-2"></i
>
                                        <p>Select a date range and generate report</p
>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <!-- Pagination -->
                <div class="mt-4 flex items-center justify-between border-t border-gray-200 px-4 py-3 sm:px-6">
                    <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
                        <div>
                            <p class="text-sm text-gray-700">Showing <span id="report-start">0</span> to <span id="report-end">0</span> of 
<span id="report-total">0</span> transactions
</p>
</div>
<div>
<nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px">
<button id="report-prev" 
class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
Previous
</button>
<button id="report-next" 
class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"></button>
Next
</button>
</nav>
</div>
</div>
</div>
</div>
</div>
<!-- Export Section -->
<div class="bg-white shadow rounded-lg p-6">
<div class="flex flex-col md:flex-row md:items-center md:justify-between">
<div class="mb-4 md:mb-0">
<h3 class="text-lg font-medium text-gray-900">Export Report</h3>
<p class="text-sm text-gray-600">Download data for external analysis or audit</p>
</div>
<div class="flex flex-wrap gap-3">
<button id="btn-export-csv" 
class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">
<i class="fas fa-file-csv mr-2"></i>
Export CSV
</button>
<button id="btn-export-pdf" 
class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">
<i class="fas fa-file-pdf mr-2"></i>Export PDF Summary
</button>
<button id="btn-print-report" 
class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">
<i class="fas fa-print mr-2"></i>
Print Report
</button>
</div>
</div>
</div>
</main>
<!-- Transaction Detail Modal -->
<div id="detail-modal" class="modal hidden">
<div class="modal-content max-w-4xl">
<div class="modal-header">
<h3 class="text-lg font-medium text-gray-900">
<i class="fas fa-receipt mr-2"></i>
Transaction Details
</h3>
<button type="button" class="modal-close">
<i class="fas fa-times"></i>
</button>
</div>
<div class="modal-body">
<div id="detail-content">
<!-- Filled by JavaScript -->
</div>
</div>
<div class="modal-footer">
<button type="button" class="btn-secondary modal-close">
Close
</button>
</div>
</div>
</div>
<script src="js/api.js"></script>
<script src="js/reports.js"></script>
</body>
</html>